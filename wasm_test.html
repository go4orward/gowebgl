<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="wasm/wasm_exec.js"></script>
    <script>
        const go = new Go();
        WebAssembly.instantiateStreaming(fetch("wasm/wasm_test.wasm"), go.importObject).then((result) => {
            go.run(result.instance);
        });
    </script>
    <style>
        body,pre { margin:0;padding:0; }
        #webglcanvas {
            position:fixed;
            opacity:1.0;
            width: 100%;
            height:100%;
            top:0;right:0;bottom:0;left:0;
        }
    </style>
</head>
<body>
    <canvas id="webglcanvas">Your browser doesn't appear to support the canvas tag.</canvas>
    <script>
        canvas = document.getElementById("webglcanvas")
        canvas.addEventListener("click", function(event) { goProcessEvent(canvas, event); });
        canvas.addEventListener("dblclick", function(event) { goProcessEvent(canvas, event); });
        canvas.addEventListener("mousemove", function(event) { goProcessEvent(canvas, event); });
        canvas.addEventListener("mousedown", function(event) { goProcessEvent(canvas, event); });
        canvas.addEventListener("mouseup", function(event) { goProcessEvent(canvas, event); });
        canvas.addEventListener("mouseleave", function(event) { goProcessEvent(canvas, event); });
        canvas.addEventListener("wheel", function(event) { goProcessEvent(canvas, event); });

        requestAnimationFrame(drawSceneForAnimation);
        function drawSceneForAnimation() {
            if (typeof goDrawAnimationFrame != 'undefined') {
                goDrawAnimationFrame(canvas);   // draw the scene by calling Go renderer function
            }
            requestAnimationFrame(drawSceneForAnimation); // call itself again for the next frame
        }
    </script>
</body>
</html>